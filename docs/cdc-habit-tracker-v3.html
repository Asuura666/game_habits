<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDC Habit Tracker v3 â€” Production Ready</title>
    <style>
        :root {
            --primary: #6366F1;
            --primary-dark: #4F46E5;
            --success: #22C55E;
            --warning: #F59E0B;
            --error: #EF4444;
            --gold: #EAB308;
            --bg: #0F172A;
            --bg-card: #1E293B;
            --bg-hover: #334155;
            --bg-code: #0D1117;
            --text: #F8FAFC;
            --text-muted: #94A3B8;
            --border: #334155;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
        }

        /* Layout */
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #8B5CF6 50%, #EC4899 100%);
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        header h1 { font-size: 3rem; font-weight: 800; position: relative; margin-bottom: 0.5rem; }
        header .subtitle { font-size: 1.25rem; opacity: 0.9; position: relative; }
        .badge-version {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            margin-top: 1.5rem;
            font-weight: 600;
            position: relative;
        }
        .meta-row {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
            position: relative;
        }
        .meta-item {
            background: rgba(0,0,0,0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        /* Navigation */
        nav {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        nav ul {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            list-style: none;
            justify-content: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        nav a {
            color: var(--text-muted);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        nav a:hover { background: var(--bg-hover); color: var(--text); }

        /* Sections */
        section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border);
        }
        h3 { font-size: 1.25rem; color: var(--text); margin: 2rem 0 1rem; }
        h4 { font-size: 1.1rem; color: var(--gold); margin: 1.5rem 0 0.75rem; }

        p { color: var(--text-muted); margin-bottom: 1rem; }

        /* Tables */
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
        th { background: var(--bg-hover); color: var(--text); padding: 0.75rem 1rem; text-align: left; font-weight: 600; }
        td { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border); color: var(--text-muted); }
        tr:hover td { background: rgba(99, 102, 241, 0.05); }

        /* Code */
        code {
            background: var(--bg-code);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--gold);
        }
        pre {
            background: var(--bg-code);
            padding: 1.5rem;
            border-radius: 12px;
            overflow-x: auto;
            margin: 1rem 0;
            border: 1px solid var(--border);
            font-size: 0.8rem;
            line-height: 1.5;
        }
        pre code { padding: 0; background: none; color: var(--text-muted); }

        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .card {
            background: var(--bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.3); }
        .card h4 { color: var(--primary); margin-top: 0; margin-bottom: 0.5rem; }
        .card p { margin-bottom: 0; font-size: 0.9rem; }

        /* Highlights */
        .highlight {
            background: rgba(99, 102, 241, 0.1);
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            border-radius: 0 8px 8px 0;
            margin: 1.5rem 0;
        }
        .highlight.success { background: rgba(34, 197, 94, 0.1); border-color: var(--success); }
        .highlight.warning { background: rgba(245, 158, 11, 0.1); border-color: var(--warning); }
        .highlight.error { background: rgba(239, 68, 68, 0.1); border-color: var(--error); }

        /* Lists */
        ul, ol { margin-left: 1.5rem; margin-bottom: 1rem; }
        li { color: var(--text-muted); margin-bottom: 0.5rem; }
        li strong { color: var(--text); }

        /* Badges */
        .badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 50px; font-size: 0.75rem; font-weight: 600; }
        .badge-common { background: #6B7280; }
        .badge-uncommon { background: var(--success); }
        .badge-rare { background: #3B82F6; }
        .badge-epic { background: #8B5CF6; }
        .badge-legendary { background: linear-gradient(135deg, var(--gold), var(--error)); }

        /* Progress bars */
        .progress-container { margin: 1rem 0; }
        .progress-label { display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .progress-bar { background: var(--bg); border-radius: 10px; height: 24px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; }
        .progress-fill.phase1 { background: linear-gradient(90deg, var(--success), #10B981); width: 100%; }
        .progress-fill.phase2 { background: linear-gradient(90deg, var(--primary), #8B5CF6); width: 0%; }

        /* Timeline */
        .timeline { position: relative; margin: 2rem 0; padding-left: 2rem; }
        .timeline::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: var(--border); }
        .timeline-item { position: relative; margin-bottom: 2rem; }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.5rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
            border: 2px solid var(--bg-card);
        }
        .timeline-item.completed::before { background: var(--success); }
        .timeline-week { font-weight: 600; color: var(--primary); margin-bottom: 0.5rem; }

        /* Architecture diagram */
        .diagram {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            font-family: monospace;
            font-size: 0.75rem;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.4;
        }

        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .stat-card {
            background: linear-gradient(135deg, var(--primary), #8B5CF6);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }
        .stat-value { font-size: 2rem; font-weight: 700; }
        .stat-label { font-size: 0.85rem; opacity: 0.9; }

        /* Phase cards */
        .phase-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .phase-title { font-size: 1.1rem; font-weight: 600; }
        .phase-duration { color: var(--text-muted); font-size: 0.9rem; }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            margin-top: 2rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 { font-size: 2rem; }
            section { padding: 1.5rem; }
            nav { position: relative; }
            .container { padding: 1rem; }
        }

        /* Print */
        @media print {
            body { background: white; color: black; }
            nav { display: none; }
            section { break-inside: avoid; }
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ¯ Habit Tracker GamifiÃ©</h1>
        <p class="subtitle">Cahier des Charges â€” Production Ready</p>
        <span class="badge-version">Version 3.0</span>
        <div class="meta-row">
            <span class="meta-item">ğŸ“… 9 fÃ©vrier 2026</span>
            <span class="meta-item">ğŸ¦Š Shiro & Ilane</span>
            <span class="meta-item">â±ï¸ 16 semaines</span>
            <span class="meta-item">âœ… POC validÃ©</span>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">Vue d'ensemble</a></li>
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#infrastructure">Infrastructure</a></li>
            <li><a href="#backend">Backend</a></li>
            <li><a href="#frontend">Frontend</a></li>
            <li><a href="#database">Database</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#llm">LLM Evaluator</a></li>
            <li><a href="#monitoring">Monitoring</a></li>
            <li><a href="#roadmap">Roadmap</a></li>
        </ul>
    </nav>

    <div class="container">
        <!-- Overview -->
        <section id="overview">
            <h2>ğŸ“‹ 1. Vue d'ensemble</h2>
            
            <p>Application de suivi d'habitudes gamifiÃ©e avec personnage RPG Ã©volutif, systÃ¨me de tÃ¢ches Ã©valuÃ©es par IA, combat PvP entre amis, et statistiques avancÃ©es.</p>

            <h3>Stack technique</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸ¨ Frontend</h4>
                    <p>Next.js 14 + React 18<br>Tailwind + shadcn/ui<br>Zustand + React Query<br>Framer Motion</p>
                </div>
                <div class="card">
                    <h4>âš™ï¸ Backend</h4>
                    <p>FastAPI + Python 3.12<br>SQLAlchemy 2.0 + Alembic<br>Celery + Redis<br>JWT + OAuth2</p>
                </div>
                <div class="card">
                    <h4>ğŸ—„ï¸ Data</h4>
                    <p>PostgreSQL 16<br>Redis 7 (cache + queue)<br>Structured logs (JSON)</p>
                </div>
                <div class="card">
                    <h4>ğŸ¤– IA</h4>
                    <p>Claude 3.5 Haiku<br>Function calling<br>Task evaluation auto</p>
                </div>
                <div class="card">
                    <h4>ğŸ³ Infra</h4>
                    <p>Docker Compose<br>Traefik (SSL auto)<br>GitHub Actions CI/CD</p>
                </div>
                <div class="card">
                    <h4>ğŸ“Š Monitoring</h4>
                    <p>Prometheus + Grafana<br>Loki + Promtail<br>Alertes configurÃ©es</p>
                </div>
            </div>

            <h3>DiffÃ©renciateurs</h3>
            <table>
                <thead>
                    <tr><th>Feature</th><th>Nous</th><th>Habitica</th><th>Streaks</th></tr>
                </thead>
                <tbody>
                    <tr><td>Gamification mature</td><td>âœ…</td><td>âŒ Cartoon</td><td>âŒ</td></tr>
                    <tr><td>TÃ¢ches Ã©valuÃ©es par IA</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr>
                    <tr><td>Combat PvP</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr>
                    <tr><td>Widget iOS natif</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr>
                    <tr><td>Stats avancÃ©es</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr>
                </tbody>
            </table>
        </section>

        <!-- Architecture -->
        <section id="architecture">
            <h2>ğŸ—ï¸ 2. Architecture technique</h2>
            
            <h3>SchÃ©ma global</h3>
            <div class="diagram">
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   Cloudflare    â”‚
                                    â”‚   (DNS + CDN)   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              VPS OVH (Debian)                              â”‚
â”‚                          habit.apps.ilanewep.cloud                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         TRAEFIK (Reverse Proxy)                      â”‚  â”‚
â”‚  â”‚                         SSL auto via Let's Encrypt                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                     â”‚                     â”‚                  â”‚
â”‚             â–¼                     â–¼                     â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚    FRONTEND      â”‚  â”‚     BACKEND      â”‚  â”‚     MONITORING       â”‚     â”‚
â”‚  â”‚    (Next.js)     â”‚  â”‚    (FastAPI)     â”‚  â”‚  (Grafana/Prometheus)â”‚     â”‚
â”‚  â”‚    Port 3000     â”‚  â”‚    Port 8000     â”‚  â”‚    Port 3001         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                 â”‚                                          â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚             â–¼                   â–¼                   â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   PostgreSQL 16  â”‚  â”‚    Redis 7       â”‚  â”‚   Celery Workers â”‚        â”‚
â”‚  â”‚   (Database)     â”‚  â”‚   (Cache/Queue)  â”‚  â”‚   (Async Tasks)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    LOGGING: Promtail â†’ Loki â†’ Grafana               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>Services Docker (Habit Tracker)</h3>
            <table>
                <thead>
                    <tr><th>Service</th><th>Image</th><th>Port</th><th>RÃ´le</th></tr>
                </thead>
                <tbody>
                    <tr><td>postgres</td><td>postgres:16-alpine</td><td>5432</td><td>Base de donnÃ©es</td></tr>
                    <tr><td>redis</td><td>redis:7-alpine</td><td>6379</td><td>Cache + Message broker</td></tr>
                    <tr><td>backend</td><td>Custom (FastAPI)</td><td>8000</td><td>API REST + /api/metrics</td></tr>
                    <tr><td>celery-worker</td><td>Custom</td><td>-</td><td>Tasks async (LLM, notifs)</td></tr>
                    <tr><td>celery-beat</td><td>Custom</td><td>-</td><td>Scheduler</td></tr>
                    <tr><td>frontend</td><td>Custom (Next.js)</td><td>3000</td><td>Interface web</td></tr>
                </tbody>
            </table>
            
            <div class="highlight">
                <strong>Monitoring</strong> = Stack existant dans <code>/home/debian/monitoring/</code> (Prometheus, Grafana, Loki, Promtail) â€” pas de nouveaux containers Ã  dÃ©ployer.
            </div>
        </section>

        <!-- Infrastructure -->
        <section id="infrastructure">
            <h2>ğŸ³ 3. Infrastructure</h2>
            
            <h3>Structure des fichiers</h3>
            <pre><code>/home/debian/habit-tracker/
â”œâ”€â”€ docker-compose.yml          # Orchestration principale
â”œâ”€â”€ .env                        # Variables d'environnement
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ alembic/               # Migrations DB
â”‚   â””â”€â”€ app/                   # Code FastAPI
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/                   # Code Next.js
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ prometheus/
â”‚   â”œâ”€â”€ grafana/
â”‚   â”œâ”€â”€ loki/
â”‚   â””â”€â”€ promtail/
â””â”€â”€ scripts/
    â”œâ”€â”€ deploy.sh              # DÃ©ploiement
    â”œâ”€â”€ backup.sh              # Backup DB
    â””â”€â”€ restore.sh             # Restauration</code></pre>

            <h3>Variables d'environnement</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸ—„ï¸ Database</h4>
                    <p><code>DB_USER</code><br><code>DB_PASSWORD</code><br><code>DB_NAME</code></p>
                </div>
                <div class="card">
                    <h4>ğŸ” Security</h4>
                    <p><code>SECRET_KEY</code><br><code>JWT_ALGORITHM</code><br><code>JWT_EXPIRE_MINUTES</code></p>
                </div>
                <div class="card">
                    <h4>ğŸ”‘ OAuth</h4>
                    <p><code>GOOGLE_CLIENT_ID</code><br><code>GOOGLE_CLIENT_SECRET</code><br><code>APPLE_CLIENT_ID</code></p>
                </div>
                <div class="card">
                    <h4>ğŸ¤– LLM</h4>
                    <p><code>ANTHROPIC_API_KEY</code><br><code>LLM_PROVIDER</code><br><code>LLM_MODEL</code></p>
                </div>
            </div>

            <h3>Scripts de dÃ©ploiement</h3>
            <div class="highlight success">
                <strong>deploy.sh</strong> â€” Pull code â†’ Build images â†’ Migrations â†’ Restart services â†’ Health check
            </div>
            <div class="highlight">
                <strong>backup.sh</strong> â€” pg_dump â†’ gzip â†’ Rotation (7 derniers) â€” Cron quotidien
            </div>
        </section>

        <!-- Backend -->
        <section id="backend">
            <h2>âš™ï¸ 4. Backend (FastAPI)</h2>
            
            <h3>Structure du code</h3>
            <pre><code>app/
â”œâ”€â”€ main.py                 # FastAPI app + startup
â”œâ”€â”€ config.py               # Pydantic Settings
â”œâ”€â”€ database.py             # SQLAlchemy async setup
â”œâ”€â”€ celery_app.py           # Celery configuration
â”œâ”€â”€ models/                 # SQLAlchemy Models (15+)
â”œâ”€â”€ schemas/                # Pydantic Schemas
â”œâ”€â”€ routers/                # API Endpoints (14 routers)
â”œâ”€â”€ services/               # Business Logic
â”œâ”€â”€ tasks/                  # Celery Tasks
â””â”€â”€ utils/                  # Security, Logger, etc.</code></pre>

            <h3>API Endpoints (40+)</h3>
            <table>
                <thead>
                    <tr><th>Router</th><th>Prefix</th><th>Endpoints</th></tr>
                </thead>
                <tbody>
                    <tr><td>Auth</td><td>/api/auth</td><td>register, login, logout, refresh, google, apple, me</td></tr>
                    <tr><td>Habits</td><td>/api/habits</td><td>CRUD, today, archive, history</td></tr>
                    <tr><td>Tasks</td><td>/api/tasks</td><td>CRUD, complete, reevaluate, today, overdue</td></tr>
                    <tr><td>Completions</td><td>/api/completions</td><td>create, delete, today, history</td></tr>
                    <tr><td>Characters</td><td>/api/characters</td><td>get, create, update, distribute stats</td></tr>
                    <tr><td>Shop</td><td>/api/shop</td><td>items, buy, featured, history</td></tr>
                    <tr><td>Inventory</td><td>/api/inventory</td><td>list, equip, unequip, equipped</td></tr>
                    <tr><td>Combat</td><td>/api/combat</td><td>challenge, get, history, stats</td></tr>
                    <tr><td>Friends</td><td>/api/friends</td><td>list, request, accept, reject, code</td></tr>
                    <tr><td>Leaderboard</td><td>/api/leaderboard</td><td>xp (weekly/monthly), streak, completion, pvp</td></tr>
                    <tr><td>Stats</td><td>/api/stats</td><td>overview, habits, calendar, trends, insights, export</td></tr>
                    <tr><td>Badges</td><td>/api/badges</td><td>list, unlocked, display</td></tr>
                    <tr><td>Health</td><td>/api/health</td><td>health, detailed, metrics</td></tr>
                </tbody>
            </table>

            <h3>Services mÃ©tier</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>xp_service.py</h4>
                    <p>Calcul XP avec multiplicateurs, bonus, caps</p>
                </div>
                <div class="card">
                    <h4>level_service.py</h4>
                    <p>Progression niveaux, rewards de niveau</p>
                </div>
                <div class="card">
                    <h4>streak_service.py</h4>
                    <p>Gestion streaks, freeze, recovery</p>
                </div>
                <div class="card">
                    <h4>combat_service.py</h4>
                    <p>Simulation PvP tour par tour</p>
                </div>
                <div class="card">
                    <h4>badge_service.py</h4>
                    <p>VÃ©rification conditions, unlock</p>
                </div>
                <div class="card">
                    <h4>llm_service.py</h4>
                    <p>Ã‰valuation tÃ¢ches avec function calling</p>
                </div>
            </div>
        </section>

        <!-- Frontend -->
        <section id="frontend">
            <h2>ğŸ¨ 5. Frontend (Next.js)</h2>
            
            <h3>Structure App Router</h3>
            <pre><code>src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/              # Login, Register, Forgot
â”‚   â””â”€â”€ (app)/               # Dashboard, Habits, Tasks, etc.
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                  # shadcn/ui (button, card, dialog...)
â”‚   â”œâ”€â”€ layout/              # Sidebar, Header, MobileNav
â”‚   â”œâ”€â”€ habits/              # HabitCard, HabitList, HabitForm
â”‚   â”œâ”€â”€ tasks/               # TaskCard, TaskAIEvaluation
â”‚   â”œâ”€â”€ character/           # CharacterDisplay, StatsPanel
â”‚   â”œâ”€â”€ combat/              # CombatArena, CombatLog
â”‚   â”œâ”€â”€ shop/                # ShopGrid, ItemPreview
â”‚   â”œâ”€â”€ stats/               # HeatmapCalendar, Charts
â”‚   â””â”€â”€ common/              # XPBar, CoinsDisplay, Confetti
â”œâ”€â”€ lib/                     # API client, utils
â”œâ”€â”€ hooks/                   # useAuth, useHabits, useTasks...
â”œâ”€â”€ stores/                  # Zustand stores
â””â”€â”€ types/                   # TypeScript types</code></pre>

            <h3>Pages principales</h3>
            <table>
                <thead>
                    <tr><th>Route</th><th>Page</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td>/dashboard</td><td>Dashboard</td><td>Vue aujourd'hui, XP, streak</td></tr>
                    <tr><td>/habits</td><td>Habits</td><td>Liste et gestion habitudes</td></tr>
                    <tr><td>/tasks</td><td>Tasks</td><td>Liste tÃ¢ches avec Ã©valuation IA</td></tr>
                    <tr><td>/calendar</td><td>Calendar</td><td>Heatmap de complÃ©tion</td></tr>
                    <tr><td>/character</td><td>Character</td><td>Personnage RPG, stats, Ã©quipement</td></tr>
                    <tr><td>/shop</td><td>Shop</td><td>Boutique d'items</td></tr>
                    <tr><td>/combat</td><td>Combat</td><td>DÃ©fis PvP entre amis</td></tr>
                    <tr><td>/friends</td><td>Friends</td><td>Liste amis, demandes</td></tr>
                    <tr><td>/leaderboard</td><td>Leaderboard</td><td>Classements amis</td></tr>
                    <tr><td>/stats</td><td>Stats</td><td>Statistiques dÃ©taillÃ©es</td></tr>
                    <tr><td>/badges</td><td>Badges</td><td>Collection de badges</td></tr>
                </tbody>
            </table>

            <h3>State Management (Zustand)</h3>
            <div class="highlight">
                <strong>Stores :</strong> authStore, habitStore, taskStore, characterStore, uiStore<br>
                <strong>Pattern :</strong> Actions async avec gestion loading/error, persist avec localStorage
            </div>
        </section>

        <!-- Database -->
        <section id="database">
            <h2>ğŸ—„ï¸ 6. Base de donnÃ©es</h2>
            
            <h3>Tables (15+)</h3>
            <table>
                <thead>
                    <tr><th>Table</th><th>Description</th><th>Relations</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>users</code></td><td>Utilisateurs + gamification</td><td>â†’ character, habits, tasks</td></tr>
                    <tr><td><code>characters</code></td><td>Personnage RPG + stats</td><td>â†’ user, inventory</td></tr>
                    <tr><td><code>habits</code></td><td>Habitudes rÃ©currentes</td><td>â†’ user, completions</td></tr>
                    <tr><td><code>tasks</code></td><td>TÃ¢ches ponctuelles</td><td>â†’ user, subtasks</td></tr>
                    <tr><td><code>subtasks</code></td><td>Sous-tÃ¢ches</td><td>â†’ task</td></tr>
                    <tr><td><code>completions</code></td><td>Check-ins habitudes</td><td>â†’ habit, user</td></tr>
                    <tr><td><code>items</code></td><td>Items boutique</td><td>â†’ inventory</td></tr>
                    <tr><td><code>user_inventory</code></td><td>Inventaire joueur</td><td>â†’ user, item</td></tr>
                    <tr><td><code>badges</code></td><td>DÃ©finition badges</td><td>â†’ user_badges</td></tr>
                    <tr><td><code>user_badges</code></td><td>Badges dÃ©bloquÃ©s</td><td>â†’ user, badge</td></tr>
                    <tr><td><code>friendships</code></td><td>Relations amis</td><td>â†’ users</td></tr>
                    <tr><td><code>combats</code></td><td>Historique PvP</td><td>â†’ users</td></tr>
                    <tr><td><code>xp_transactions</code></td><td>Audit XP</td><td>â†’ user</td></tr>
                    <tr><td><code>coin_transactions</code></td><td>Audit Coins</td><td>â†’ user</td></tr>
                    <tr><td><code>daily_stats</code></td><td>Stats agrÃ©gÃ©es</td><td>â†’ user</td></tr>
                    <tr><td><code>notifications</code></td><td>Notifications</td><td>â†’ user</td></tr>
                </tbody>
            </table>

            <h3>Seed Data</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value">30</span>
                    <span class="stat-label">Badges</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">26</span>
                    <span class="stat-label">Items</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">5</span>
                    <span class="stat-label">Classes</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">50</span>
                    <span class="stat-label">Niveaux</span>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section id="features">
            <h2>âœ¨ 7. Features dÃ©taillÃ©es</h2>
            
            <h3>7.1 Habitudes</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸ“ CrÃ©ation</h4>
                    <p>Nom, icÃ´ne, couleur, description, catÃ©gorie, frÃ©quence flexible, rappels multiples, objectif chiffrÃ©</p>
                </div>
                <div class="card">
                    <h4>âœ… Tracking</h4>
                    <p>Check tap, valeur numÃ©rique, timer intÃ©grÃ©, notes, undo 10s</p>
                </div>
                <div class="card">
                    <h4>ğŸ¯ FrÃ©quences</h4>
                    <p>Daily, Weekly, Specific days, X per week</p>
                </div>
                <div class="card">
                    <h4>ğŸ Rewards</h4>
                    <p>+10 XP base, +2 bonus avant rappel, +5 premiÃ¨re action, multiplicateur streak (x1.0 â†’ x2.0)</p>
                </div>
            </div>

            <h3>7.2 TÃ¢ches personnalisÃ©es</h3>
            <div class="highlight">
                <strong>Concept :</strong> L'utilisateur crÃ©e ses propres tÃ¢ches ponctuelles. Un LLM Ã©value automatiquement la difficultÃ© et attribue les rÃ©compenses appropriÃ©es.
            </div>
            <table>
                <thead>
                    <tr><th>DifficultÃ©</th><th>XP</th><th>Coins</th><th>Exemple</th></tr>
                </thead>
                <tbody>
                    <tr><td>Trivial</td><td>1-5</td><td>1-3</td><td>RÃ©pondre Ã  un email</td></tr>
                    <tr><td>Easy</td><td>5-15</td><td>3-8</td><td>Faire les courses</td></tr>
                    <tr><td>Medium</td><td>15-40</td><td>8-20</td><td>PrÃ©parer une prÃ©sentation</td></tr>
                    <tr><td>Hard</td><td>40-80</td><td>20-40</td><td>Terminer un rapport</td></tr>
                    <tr><td>Epic</td><td>80-150</td><td>40-75</td><td>Projet multi-jours</td></tr>
                    <tr><td>Legendary</td><td>150-300</td><td>75-150</td><td>Lancer un produit</td></tr>
                </tbody>
            </table>

            <h3>7.3 Combat PvP</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>âš”ï¸ DÃ©fi</h4>
                    <p>DÃ©fier un ami depuis son profil. Mise de Coins optionnelle (10-100).</p>
                </div>
                <div class="card">
                    <h4>ğŸ® Simulation</h4>
                    <p>Combat automatique tour par tour. Stats + Ã©quipement dÃ©terminent l'issue.</p>
                </div>
                <div class="card">
                    <h4>ğŸ“Š Stats utilisÃ©es</h4>
                    <p>FOR â†’ dÃ©gÃ¢ts, END â†’ PV, AGI â†’ esquive, INT â†’ critique</p>
                </div>
                <div class="card">
                    <h4>ğŸ† Rewards</h4>
                    <p>Victoire: +30 XP, +50 Coins (+mise x2). DÃ©faite: +10 XP participation.</p>
                </div>
            </div>

            <h3>7.4 Assets Personnages â€” LPC Spritesheet Generator</h3>
            <div class="highlight">
                <strong>Outil :</strong> <a href="https://sanderfrenken.github.io/Universal-LPC-Spritesheet-Character-Generator/" style="color: var(--primary);">Universal LPC Spritesheet Character Generator</a><br>
                <strong>Licence :</strong> CC-BY-SA 3.0 / GPL 3.0 (utilisable commercialement avec attribution)
            </div>
            
            <table>
                <thead>
                    <tr><th>Avantage</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>Modulaire</strong></td><td>Corps + cheveux + armures + armes combinables dynamiquement</td></tr>
                    <tr><td><strong>Full-body</strong></td><td>Personnages complets, pas juste des avatars</td></tr>
                    <tr><td><strong>AnimÃ©</strong></td><td>Spritesheets avec idle, walk, attack, cast</td></tr>
                    <tr><td><strong>Gratuit</strong></td><td>Open source, utilisable commercialement</td></tr>
                    <tr><td><strong>CohÃ©rent</strong></td><td>Style pixel art RPG uniforme</td></tr>
                </tbody>
            </table>

            <h4>Assets disponibles</h4>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸ‘¤ Corps</h4>
                    <p>2 genres, 8+ couleurs de peau</p>
                </div>
                <div class="card">
                    <h4>ğŸ’‡ Cheveux</h4>
                    <p>50+ styles, 12+ couleurs</p>
                </div>
                <div class="card">
                    <h4>ğŸ›¡ï¸ Armures</h4>
                    <p>Cuir, maille, plate, dragon</p>
                </div>
                <div class="card">
                    <h4>âš”ï¸ Armes</h4>
                    <p>Ã‰pÃ©es, haches, arcs, bÃ¢tons, dagues</p>
                </div>
                <div class="card">
                    <h4>ğŸ‘‘ Casques</h4>
                    <p>Capuches, heaumes, couronnes</p>
                </div>
                <div class="card">
                    <h4>ğŸ§£ Accessoires</h4>
                    <p>Capes, anneaux, familiers (v2)</p>
                </div>
            </div>

            <h4>SystÃ¨me de layers</h4>
            <div class="diagram">Layer 5: Casque
Layer 4: Arme
Layer 3: Cape
Layer 2: Armure
Layer 1.5: Cheveux
Layer 1: Corps (base)</div>
            <p style="margin-top: 1rem; color: var(--text-muted);">Dimensions: 64Ã—64 pixels | CSS: <code>image-rendering: pixelated</code> pour upscale net</p>

            <h4>Animations LPC</h4>
            <table>
                <thead>
                    <tr><th>Animation</th><th>Frames</th><th>Usage dans l'app</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>idle</strong></td><td>1</td><td>Affichage par dÃ©faut (dashboard, profil)</td></tr>
                    <tr><td><strong>slash</strong></td><td>6 Ã— 4 dirs</td><td>âœ… Check habitude, attaque combat (Ã©pÃ©e)</td></tr>
                    <tr><td><strong>cast</strong></td><td>7 Ã— 4 dirs</td><td>ğŸ¯ TÃ¢che complÃ©tÃ©e, attaque mage, level up</td></tr>
                    <tr><td><strong>hurt</strong></td><td>6</td><td>ğŸ’¥ Recevoir des dÃ©gÃ¢ts en combat</td></tr>
                    <tr><td><strong>death</strong></td><td>6</td><td>â˜ ï¸ KO en combat (dÃ©faite)</td></tr>
                    <tr><td><strong>walk</strong></td><td>9 Ã— 4 dirs</td><td>Navigation map (v2+)</td></tr>
                </tbody>
            </table>
            
            <div class="highlight success">
                <strong>Triggers d'animation :</strong><br>
                â€¢ Check habitude â†’ <code>slash</code> + particules XP<br>
                â€¢ TÃ¢che difficile complÃ©tÃ©e â†’ <code>cast</code> + glow<br>
                â€¢ Combat attaque â†’ <code>slash</code> ou <code>cast</code><br>
                â€¢ Combat dÃ©gÃ¢ts â†’ <code>hurt</code><br>
                â€¢ Victoire â†’ idle + confetti ğŸ‰<br>
                â€¢ DÃ©faite â†’ <code>death</code>
            </div>

            <h3>7.5 Gamification</h3>
            <table>
                <thead>
                    <tr><th>SystÃ¨me</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>XP</strong></td><td>GagnÃ© par habitudes, tÃ¢ches, combats, badges. Formule avec multiplicateurs.</td></tr>
                    <tr><td><strong>Niveaux</strong></td><td>50 niveaux avec titres (DÃ©butant â†’ Immortel). Rewards Ã  chaque niveau.</td></tr>
                    <tr><td><strong>Streaks</strong></td><td>Global, parfait, par habitude. Freeze gratuit 1x/sem. Multiplicateur x1.0â†’x2.0.</td></tr>
                    <tr><td><strong>Badges</strong></td><td>30 badges (progression, streak, volume, comportement, secrets, sociaux).</td></tr>
                    <tr><td><strong>Personnage</strong></td><td>5 classes, 5 stats distribuables, Ã©volution visuelle avec niveau.</td></tr>
                    <tr><td><strong>Boutique</strong></td><td>26 items (armes, armures, casques, accessoires). 5 raretÃ©s.</td></tr>
                    <tr><td><strong>Leaderboard</strong></td><td>5 classements amis (XP hebdo/mensuel, streak, complÃ©tion, PvP).</td></tr>
                </tbody>
            </table>
        </section>

        <!-- LLM -->
        <section id="llm">
            <h2>ğŸ¤– 8. LLM Task Evaluator</h2>
            
            <h3>Architecture</h3>
            <div class="diagram">
User: "Finir le rapport trimestriel"
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LLM EVALUATOR SERVICE       â”‚
â”‚  Model: Claude 3.5 Haiku            â”‚
â”‚                                     â”‚
â”‚  Tools (Function Calling):          â”‚
â”‚  â€¢ get_user_stats(user_id)          â”‚
â”‚  â€¢ get_similar_tasks(keywords)      â”‚
â”‚  â€¢ get_reward_scale()               â”‚
â”‚  â€¢ get_category_average(category)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  {                                  â”‚
â”‚    "difficulty": "medium",          â”‚
â”‚    "xp_reward": 35,                 â”‚
â”‚    "coins_reward": 20,              â”‚
â”‚    "reasoning": "...",              â”‚
â”‚    "suggested_subtasks": [...]      â”‚
â”‚  }                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>Tools disponibles</h3>
            <table>
                <thead>
                    <tr><th>Tool</th><th>Description</th><th>Usage</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>get_user_stats</code></td><td>Niveau, XP, historique</td><td>Contextualiser l'Ã©valuation</td></tr>
                    <tr><td><code>get_similar_tasks</code></td><td>TÃ¢ches similaires passÃ©es</td><td>CohÃ©rence des rewards</td></tr>
                    <tr><td><code>get_reward_scale</code></td><td>Ã‰chelle XP/Coins par difficultÃ©</td><td>Respecter les ranges</td></tr>
                    <tr><td><code>get_category_average</code></td><td>Moyenne pour une catÃ©gorie</td><td>Calibration</td></tr>
                </tbody>
            </table>

            <h3>Anti-abus</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸš« Rate Limit</h4>
                    <p>Max 20 Ã©valuations IA / jour / user</p>
                </div>
                <div class="card">
                    <h4>ğŸ“Š XP Cap</h4>
                    <p>Max 500 XP / jour via tÃ¢ches</p>
                </div>
                <div class="card">
                    <h4>ğŸ” Gaming Detection</h4>
                    <p>Alerte si trop de tÃ¢ches triviales</p>
                </div>
                <div class="card">
                    <h4>âœ… Review Auto</h4>
                    <p>TÃ¢ches > 100 XP vÃ©rifiÃ©es aprÃ¨s completion</p>
                </div>
            </div>

            <h3>CoÃ»t estimÃ©</h3>
            <p>Claude 3.5 Haiku: ~$0.0003 / Ã©valuation â†’ ~$30/mois pour 100k Ã©valuations</p>
        </section>

        <!-- Monitoring -->
        <section id="monitoring">
            <h2>ğŸ“Š 9. Monitoring & Logs</h2>
            
            <h3>Monitoring existant sur le VPS</h3>
            <div class="highlight success">
                <strong>Pas de nouveau stack Ã  dÃ©ployer !</strong> Le monitoring existe dÃ©jÃ  sur le VPS. On connecte simplement le Habit Tracker au stack existant.
            </div>
            
            <table>
                <thead>
                    <tr><th>Service</th><th>URL</th><th>Credentials</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>Grafana</strong></td><td><code>https://monitoring.apps.ilanewep.cloud</code></td><td>admin@monitoring.local / Monitoring2026!</td></tr>
                    <tr><td>Prometheus</td><td>Interne (port 9090)</td><td>Via Grafana</td></tr>
                    <tr><td>Loki</td><td>Interne (port 3100)</td><td>Via Grafana</td></tr>
                </tbody>
            </table>

            <h3>Configuration Ã  ajouter</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸ“Š Prometheus</h4>
                    <p>Ajouter le job <code>habit-tracker</code> dans prometheus.yml existant pour scraper <code>/api/metrics</code></p>
                </div>
                <div class="card">
                    <h4>ğŸ“‹ Grafana</h4>
                    <p>CrÃ©er un dashboard "Habit Tracker" avec les panels (requests, latency, habits completed, LLM calls)</p>
                </div>
                <div class="card">
                    <h4>ğŸ“ Promtail</h4>
                    <p>DÃ©jÃ  configurÃ© pour collecter les logs Docker. Les containers <code>habit-*</code> seront auto-dÃ©tectÃ©s.</p>
                </div>
            </div>

            <h3>MÃ©triques Prometheus</h3>
            <table>
                <thead>
                    <tr><th>MÃ©trique</th><th>Type</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>http_requests_total</code></td><td>Counter</td><td>RequÃªtes par endpoint/status</td></tr>
                    <tr><td><code>request_latency_seconds</code></td><td>Histogram</td><td>Latence P50/P95/P99</td></tr>
                    <tr><td><code>habits_completed_total</code></td><td>Counter</td><td>Habitudes complÃ©tÃ©es</td></tr>
                    <tr><td><code>tasks_created_total</code></td><td>Counter</td><td>TÃ¢ches crÃ©Ã©es par difficultÃ©</td></tr>
                    <tr><td><code>combats_total</code></td><td>Counter</td><td>Combats PvP</td></tr>
                    <tr><td><code>llm_calls_total</code></td><td>Counter</td><td>Appels LLM par status</td></tr>
                    <tr><td><code>llm_latency_seconds</code></td><td>Histogram</td><td>Latence LLM</td></tr>
                    <tr><td><code>active_users</code></td><td>Gauge</td><td>Users actifs (5 min)</td></tr>
                </tbody>
            </table>

            <h3>Alertes configurÃ©es</h3>
            <div class="card-grid">
                <div class="card" style="border-color: var(--error);">
                    <h4>ğŸ”´ Critical</h4>
                    <p>Error rate > 10% pendant 2min</p>
                </div>
                <div class="card" style="border-color: var(--warning);">
                    <h4>ğŸŸ¡ Warning</h4>
                    <p>P95 latency > 2s pendant 5min</p>
                </div>
                <div class="card" style="border-color: var(--warning);">
                    <h4>ğŸŸ¡ Warning</h4>
                    <p>LLM latency > 10s</p>
                </div>
                <div class="card" style="border-color: var(--warning);">
                    <h4>ğŸŸ¡ Warning</h4>
                    <p>Celery queue > 100 tasks</p>
                </div>
            </div>

            <h3>Logs structurÃ©s</h3>
            <pre><code>{
  "timestamp": "2026-02-09T22:30:00.000Z",
  "level": "info",
  "event": "habit_completed",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "habit_id": "7c9e6679-7425-40de-944b-e07fc1f90ae7",
  "xp_earned": 14,
  "coins_earned": 2,
  "service": "habit-backend"
}</code></pre>
        </section>

        <!-- Roadmap -->
        <section id="roadmap">
            <h2>ğŸ“… 10. Roadmap â€” 16 semaines</h2>

            <h3>Vue globale</h3>
            <div class="phase-card">
                <div class="phase-header">
                    <span class="phase-title">ğŸ—ï¸ Phase 1: Infrastructure</span>
                    <span class="phase-duration">Semaines 1-2</span>
                </div>
                <div class="progress-bar"><div class="progress-fill phase1">Setup complet</div></div>
                <p style="margin-top: 1rem; color: var(--text-muted);">Docker, DB, Redis, CI/CD, Monitoring, Logs</p>
            </div>

            <div class="phase-card">
                <div class="phase-header">
                    <span class="phase-title">âš™ï¸ Phase 2: Backend Core</span>
                    <span class="phase-duration">Semaines 3-5</span>
                </div>
                <div class="progress-bar"><div class="progress-fill phase2"></div></div>
                <p style="margin-top: 1rem; color: var(--text-muted);">Auth (JWT + OAuth), Habits CRUD, Tasks + LLM Evaluator</p>
            </div>

            <div class="phase-card">
                <div class="phase-header">
                    <span class="phase-title">ğŸ¨ Phase 3: Frontend Core</span>
                    <span class="phase-duration">Semaines 6-8</span>
                </div>
                <div class="progress-bar"><div class="progress-fill phase2"></div></div>
                <p style="margin-top: 1rem; color: var(--text-muted);">Auth UI, Dashboard, Habits UI, Tasks UI, Calendar</p>
            </div>

            <div class="phase-card">
                <div class="phase-header">
                    <span class="phase-title">ğŸ® Phase 4: Gamification</span>
                    <span class="phase-duration">Semaines 9-11</span>
                </div>
                <div class="progress-bar"><div class="progress-fill phase2"></div></div>
                <p style="margin-top: 1rem; color: var(--text-muted);">XP/Levels, Character RPG, Shop/Inventory, Combat PvP</p>
            </div>

            <div class="phase-card">
                <div class="phase-header">
                    <span class="phase-title">ğŸ‘¥ Phase 5: Social & Polish</span>
                    <span class="phase-duration">Semaines 12-14</span>
                </div>
                <div class="progress-bar"><div class="progress-fill phase2"></div></div>
                <p style="margin-top: 1rem; color: var(--text-muted);">Friends, Leaderboard, Badges, Stats, Widget iOS</p>
            </div>

            <div class="phase-card">
                <div class="phase-header">
                    <span class="phase-title">ğŸš€ Phase 6: Beta & Launch</span>
                    <span class="phase-duration">Semaines 15-16</span>
                </div>
                <div class="progress-bar"><div class="progress-fill phase2"></div></div>
                <p style="margin-top: 1rem; color: var(--text-muted);">Testing E2E, Security audit, Beta, Launch public</p>
            </div>

            <h3>Estimations</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value">16</span>
                    <span class="stat-label">Semaines</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">~320h</span>
                    <span class="stat-label">Effort total</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">~40â‚¬</span>
                    <span class="stat-label">CoÃ»t/mois</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">40+</span>
                    <span class="stat-label">Endpoints API</span>
                </div>
            </div>

            <h3>KPIs cibles (M3)</h3>
            <table>
                <thead>
                    <tr><th>KPI</th><th>M1</th><th>M3</th><th>M6</th></tr>
                </thead>
                <tbody>
                    <tr><td>Inscriptions</td><td>200</td><td>1,000</td><td>5,000</td></tr>
                    <tr><td>DAU</td><td>50</td><td>300</td><td>1,500</td></tr>
                    <tr><td>RÃ©tention J7</td><td>30%</td><td>40%</td><td>50%</td></tr>
                    <tr><td>RÃ©tention J30</td><td>15%</td><td>25%</td><td>35%</td></tr>
                    <tr><td>Taux complÃ©tion</td><td>50%</td><td>60%</td><td>70%</td></tr>
                </tbody>
            </table>
        </section>

        <!-- URLs -->
        <section>
            <h2>ğŸ”— URLs & Ressources</h2>
            <table>
                <thead>
                    <tr><th>Service</th><th>URL</th></tr>
                </thead>
                <tbody>
                    <tr><td>Application</td><td><code>https://habit.apps.ilanewep.cloud</code></td></tr>
                    <tr><td>API Docs</td><td><code>https://habit.apps.ilanewep.cloud/api/docs</code></td></tr>
                    <tr><td>Monitoring</td><td><code>https://habit-monitoring.apps.ilanewep.cloud</code></td></tr>
                    <tr><td>POC validÃ©</td><td><code>https://habit.apps.ilanewep.cloud</code></td></tr>
                </tbody>
            </table>
        </section>
    </div>

    <footer>
        <p>ğŸ“„ Cahier des Charges â€” <strong>Habit Tracker GamifiÃ©</strong></p>
        <p>Version 3.0 â€” Production Ready</p>
        <p style="margin-top: 1rem;">GÃ©nÃ©rÃ© par <strong>Shiro ğŸ¦Š</strong> â€” 9 fÃ©vrier 2026</p>
    </footer>
</body>
</html>
